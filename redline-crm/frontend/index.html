<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="RedLine CRM - AI-Powered Call Center Management System" />
    <title>RedLine CRM</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Outfit:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Custom scrollbar for a sleek look */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #f5f5f5; 
      }
      ::-webkit-scrollbar-thumb {
        background: #d4d4d4; 
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #ef4444; 
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.559.0",
    "recharts": "https://aistudiocdn.com/recharts@^3.5.1",
    "react/": "https://aistudiocdn.com/react@^19.2.1/",
    "react": "https://aistudiocdn.com/react@^19.2.1",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.1/",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.32.0"
  }
}
</script>

  <!-- Global Error Suppression for Browser Extension Interference -->
  <script>
    (function() {
      'use strict';
      
      // 1. Suppress console.error for known extension errors
      const originalError = console.error;
      console.error = function(...args) {
        const errorMessage = args.join(' ');
        
        // List of known browser extension error patterns to suppress
        const extensionErrorPatterns = [
          'Could not establish connection',
          'Receiving end does not exist',
          'Extension context invalidated',
          'chrome.runtime.sendMessage',
          'chrome-extension://',
          'moz-extension://'
        ];
        
        // Check if error matches any extension pattern
        const isExtensionError = extensionErrorPatterns.some(pattern => 
          errorMessage.includes(pattern)
        );
        
        // Only log if it's not an extension error
        if (!isExtensionError) {
          originalError.apply(console, args);
        }
      };
      
      // 2. Suppress unhandled promise rejections from extensions
      window.addEventListener('unhandledrejection', function(event) {
        const errorMessage = event.reason?.message || event.reason?.toString() || '';
        
        // Extension error patterns
        const extensionErrorPatterns = [
          'Could not establish connection',
          'Receiving end does not exist',
          'Extension context invalidated',
          'chrome.runtime',
          'chrome-extension'
        ];
        
        // Check if this is an extension error
        const isExtensionError = extensionErrorPatterns.some(pattern => 
          errorMessage.includes(pattern)
        );
        
        if (isExtensionError) {
          // Prevent the error from appearing in console
          event.preventDefault();
          return;
        }
      });
      
      // 3. Suppress window.onerror for extension errors
      const originalOnError = window.onerror;
      window.onerror = function(message, source, lineno, colno, error) {
        const errorMessage = message?.toString() || '';
        const errorSource = source?.toString() || '';
        
        // Check if error is from an extension
        const isExtensionError = 
          errorMessage.includes('Could not establish connection') ||
          errorMessage.includes('Receiving end does not exist') ||
          errorSource.includes('chrome-extension://') ||
          errorSource.includes('moz-extension://');
        
        if (isExtensionError) {
          // Suppress the error
          return true;
        }
        
        // Call original handler for non-extension errors
        if (originalOnError) {
          return originalOnError(message, source, lineno, colno, error);
        }
        return false;
      };
      
      // 4. Log one-time message about extension interference (dev mode only)
      if (window.location.hostname === 'localhost' || window.location.hostname.includes('127.0.0.1')) {
        console.log('%cüõ°Ô∏è RedLine CRM - Extension Error Suppression Active', 'color: #10b981; font-weight: bold;');
        console.log('%cBrowser extension errors are being filtered to prevent console noise.', 'color: #6b7280;');
      }
    })();
  </script>

<link rel="stylesheet" href="/index.css">
</head>
  <body class="bg-neutral-50 text-neutral-900 font-sans antialiased">
    <div id="root"></div>
  <script type="module" src="/index.tsx"></script>
</body>
</html>